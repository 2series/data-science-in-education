---
title: "Chapter 11 Walkthrough: Longitudinal Analysis"
author: 
date: 
output: html_document
---

# Vocabulary 

Read in
Aggregate data

# 11.1 Introduction 

The authors chose to use a publicly available dataset for this walkthrough. Like most publicly available datasets, this one contains aggregate data. 

# 11.2 Special Education Child Count and Environment Data

You can download these datasets on the United States Department of Education website: [https://www2.ed.gov/programs/osepidea/618-data/state-level-data-files/index.html#bccee]("https://www2.ed.gov/programs/osepidea/618-data/state-level-data-files/index.html#bccee").

# 11.2.1 Reading In the Dataset 

When you are designing an analysis that uses multiple datasets that all have the same structure, you can read in each dataset using one chunk of code. This chunk of code will store each dataset as an element of a list. 

Before doing that, you can explore just one of the datasets briefly to see what you can learn about the dataset's structure. Clues from this initial exploration of one dataset informs how you read in all the datasets at once later on. For example, this first dataset has some lines at the top that don't actually contain data: 

```{r}
library(tidyverse)

read_csv("10a-walkthrough-6-data/bchildcountandedenvironments2012.csv")
```

The rows containing "Extraction Date:", "Updated:" and "Revised:" aren't actually rows. They're notes the authors left at the top of the dataset to show when the dataset was changed. 

`read_csv` uses the first row as the variable names unless told otherwise, so we need to explicitly tell `read_csv` to skip those lines using the `skip` argument. If we don't, `read_csv` assumes the very first line--the one that says "Extraction Date:"--is the correct row of variable names: 

```{r}
read_csv("10a-walkthrough-6-data/bchildcountandedenvironments2012.csv", skip = 4)
```

Using the `skip` argument tells `read_csv` to think of the line containing "Year", "State Name", and so on as the first line. That's why passing `skip = 4` as an argument to `read_csv` gives you a dataset with "Year", "State Name", and so on as variable names. 

Storing each dataset as an element in a list starts with storing each dataset's filename as an element of a list: 

```{r}
filenames <- list.files("10a-walkthrough-6-data", full.names = TRUE)

# A list of filenames and paths
filenames
```

```{r}
all_files <- filenames %>% map(., ~read_csv(., skip = 4))

all_files
```

# 11.2.2 Cleaning the Dataset 

# 11.3 How have Child Counts Changed Over Time? 

# 11.3.1 Transform the Dataset 

# 11.3.2 Visualize the Dataset  

# 11.3.3 Model the Dataset 

# 11.4 Ask More Questions  

# 11.5 Aggregate Data as Context for Student Data 